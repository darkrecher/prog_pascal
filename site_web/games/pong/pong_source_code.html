<html>

<head>

  <meta charset="utf-8">
  <title>Réchèr : animations en Turbo Pascal dans un émulateur js-dos</title>
  <link href="../../css_and_fonts/style.css" rel="stylesheet" type="text/css">

</head>

<body>

  <div>
    <a href="../game_summary.html">&lt; Retour au sommaire des jeux</a>
  </div>
  <br>

  <div>
    <a href="js_dos_player_pong.html">&gt; Jouer à Pong</a>
  </div>

  <h1>Pong - Code source</h1>

  <div>
    <a href="PONG.PAS">&gt; Télécharger le code source (encodage CP437)</a>
    <br>
    <a href="MCGAGRAF.PAS">&gt; Télécharger le code source de la librairie MCGAGRAF (encodage CP437)</a>
    <br>
    <a href="MOUSEREC.PAS">&gt; Télécharger le code source de la librairie MOUSEREC (encodage CP437)</a>
  </div>

  <h2>Le jeu</h2>

  <p>
    Tout le monde connaît Pong. Ma version a un tweak supplémentaire : on peut jouer jusqu'à 4, et chaque joueur peut avoir un ou plusieurs bords d'écran. Les scores sont calculés en conséquence. Un joueur qui ne rattrape pas la balle fait gagner 3 points à un joueur qui a 3 bords à gérer, mais n'en fait gagner qu'un seul à un joueur qui n'a qu'un seul bord à gérer.
    <br><br>
    On peut aussi jouer à zéro joueurs, mais c'est stupide.
    <br><br>
    Par contre, le fait de pouvoir renvoyer la balle dans 3 directions possibles lorsqu'on perd, ça casse un peu le jeu. On se retrouve parfois dans une situation où un premier joueurs peut renvoyer la balle à un endroit qu'un deuxième joueur ne peut pas atteindre assez rapidement. Du coup, le premier joueur fait perdre le deuxième. Et le deuxième joueur est lui aussi dans une situation où il peut renvoyer la balle à un endroit inatteignable. Il fait perdre le premier, qui refait perdre le deuxième, qui refait perdre le premier, et ainsi de suite.
    <br><br>
    J'étais quand même assez fier de ma gestion des rebondissements. Une partie du mouvement de la raquette est ajouté au mouvement de la balle. On peut la dévier ou la faire aller plus vite. Pour éviter que ça parte en cacahuète et que la balle aille trop vite, elle est un petit peu ralentie à chaque rebond (y compris contre les bords statiques). Je voulais faire mieux que tous les casse-briques pourris où la direction de la balle dépend de l'endroit où elle tape sur la raquette, alors que la raquette est toute plate. J'ai écrit tout un article de blog sur cet immense problème. Je vous laisse le retrouver dans mon fatras.
    <br><br>
    L'un de mes potes avait bien aimé ce jeu et avait tenté un gros match contre son frère. Ils s'étaient aperçu tous les deux que le comptage des points n'était pas équilibré. Un joueur ayant 3 bords devrait gagner, non pas 3 points à chaque fois, mais 6. Ou quelque chose du genre. En tout cas, j'étais assez heureux de voir que mes jeux pouvaient être intéressants au point que des personnes fassent des gros matchs avec. C'était une lointaine époque sans trop d'internet, où l'offre vidéoludique n'était pas aussi foisonnante. Zut, ça suffit la nostalgie.
    <br><br>
    Ce même pote m'avait confirmé que la gestion des rebondissements était cool. Il avait même sorti la phrase : "le moteur physique il est bien". Ha ha ha, "moteur physique", j'adore. Axolotl-Zomik, merci pour tes compliments et pour ton attention.
  </p>


  <h2>Les images</h2>

  <p>
    Le fichier "ALPHA4.LBM" contient cette image :
    <br>
    <img src="alpha4.png">
    <br><br>
    C'est la police de caractère du texte initial. Elle a été créée par mon frère. Le format de fichier image "LBM" est celui du logiciel Deluxe Paint (on n'avait que ça à l'époque). Ce format est toujours lisible par des logiciels de dessins un peu plus complets que Paint.
    <br><br>
    Le fichier "PONG.IMG" contient cette image :
    <br>
    <img src="pong_img.png">
    <br><br>
    Il s'agit de l'image de présentation, réalisée par moi, à partir de vomi de licorne. Il s'agit d'un format de fichier "maison". On peut pas vraiment parler de format. Les couleurs des pixels sont écrites les unes après les autres dans le fichier. Les dimensions de l'image et la palette de couleur ne sont même pas intégrés dedans.
    <br><br>
    Le fichier "PONG.SPR" contient cette image :
    <br>
    <img src="pong_spr.png">
    <br><br>
    Car il me restait un peu de vomi de licorne. Le premier bidule vert correspond au curseur de définition de la vitesse du jeu. Le second, c'est la balle.
    <br>
    On reste sur le même non-format de fichier maison, sauf que les pixels des 5 images sont écrites les unes après les autres dans le fichiers. Si on ne connait pas à l'avance le nombre d'images et leurs dimensions respectives, on ne peut rien en faire. Mais vous pouvez trouver ça dans le code source.
  </p>

  <h2>Le texte au début du jeu</h2>

  <p>
    Comme dit dans le texte lui-même, c'est mon frère qui a codé le scrolling.
    <br><br>
    Un pote à moi à qui j'apprenais à coder l'avait lui aussi intégré dans l'un de ses jeux. Quand mon frère a vu ça, il a pris un air un peu embêté, et a dit : "je pensais pas que vous seriez tous à reprendre ce que j'ai fait". On était pas "tous", on était "deux". J'ai rien à dire de plus à ce sujet.
    <br><br>
    Dans le code source, une petite partie du texte a été mise en commentaire :"enormes remerciements a: "... Les caractères juste après, qui sont eux aussi en commentaires, définissent uniquement des effets spéciaux (arrêt du texte, ondulation, ...), il n'y a pas de lettres. Il y en avait au départ, que j'ai enlevées, en plus de mettre en commentaire. J'ai probablement dû faire cette mise en commentaire à la fin du lycée, pour ne pas avoir à répondre à des questions embarrassante de gens qui ne connaissaient pas le contexte.
    <br><br>
    Les lettres effacées étaient "HB", les initiales de la fille dont j'étais amoureux. J'ai rien à dire de plus à ce sujet.
    <br><br>
    Tout le reste du texte est du grand n'importe quoi. Les élucubrations aléatoires d'un adolescent. Je reste heureux d'avoir écrit ça et de l'avoir implanté dans ce jeu. L'un de mes potes (pas le même que les deux précédent) l'avait bien apprécié, il m'avait dit qu'il l'avait regardé défiler jusqu'au bout. J'ai encore et toujours besoin de ces petits shoots de gonflage d'ego.
    <br><br>
    Voici quelques précisions pour vous aider à comprendre toutes les petites références :
    <br>
     - Le "monsieur R" était notre prof de français en seconde et en première. Un type grand, gros, large, antipathique, méprisant et effrayant.
    <br>
     - Skyrock, le dimanche de 11h a minuit, passait du raï. C'était ce que j'écoutais à l'époque. J'écoute encore Natacha Atlas de temps en temps. Et aussi Emel Mathlouthi.
    <br>
     - Le numéro gagnant de la tombola est une référence à un sketch de François Perusse.
    <br>
     - La blague du fauteuil dans un salon de coiffure a été piquée d'une chanson du groupe Gnawa Diffusion, intitulée Ombre-Elles.
    <br><br>
    Ce texte m'a remémoré l'état d'esprit dans lequel j'étais à l'époque. C'était plutôt joyeux et insouciant. De la créativité, des potes, des jeux de rôles, un amour à sens unique, une fille (qui n'est pas "HB") avec qui j'ai lié des liens d'amitié qui sont toujours là 20 ans après. Zut, ça suffit la nostalgie. À force, je vais devenir nostalgique du sentiment de nostalgie que je viens d'éprouver la veille.
    <br><br>
    Oui, ça fait plusieurs jours que je suis sur ce texte. C'est comme ça.
  </p>

  <h2>Le code source</h2>

  Bla

  <div class="sourcecode">

<pre>
Du code en Pascal.
</pre>

  </div>

</body>

</html>
